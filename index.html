<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מקורות יהודו-נוצריים חיצוניים | בית מדרש וירטואלי</title>
    <!-- Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for a more scholarly and aesthetic look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            direction: rtl; /* Set text direction to right-to-left for Hebrew */
            text-align: right; /* Align text to the right */
            background-color: #f9fafb; /* Light gray background */
            color: #1f2937; /* Dark gray text */
        }
        /* Specific styling for navigation links to ensure proper alignment for RTL */
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            transition: background-color 0.2s ease-in-out;
            white-space: nowrap; /* Prevent wrapping */
        }
        .nav-link:hover {
            background-color: #e5e7eb; /* gray-200 */
        }
        .card-icon {
            font-size: 2.5rem; /* Larger icon size */
            color: #6366f1; /* Indigo-500 */
        }
        /* Flexbox for RTL navigation items */
        .rtl-nav-items {
            display: flex;
            flex-direction: row-reverse; /* Arrange items from right to left */
            gap: 1rem; /* Space between nav items */
        }
        /* Adjust hero section padding for RTL */
        .hero-section {
            padding-right: 2rem; /* Add padding on the right */
            padding-left: 2rem;
        }
        /* Styling for LLM response boxes */
        .llm-response-box {
            background-color: #e0f2fe; /* Light blue background */
            border-right: 4px solid #3b82f6; /* Blue border on the right for RTL */
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-top: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            color: #1e40af; /* Darker blue text */
        }
        .llm-error-box {
            background-color: #fee2e2; /* Light red background */
            border-right: 4px solid #ef4444; /* Red border on the right for RTL */
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            color: #b91c1c; /* Dark red text */
        }
        .loading-text {
            color: #6b7280; /* Gray text */
            font-style: italic;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section (Hero) -->
    <header class="bg-gradient-to-r from-indigo-700 to-purple-600 text-white py-16 px-4 md:px-8 text-center rounded-b-3xl shadow-lg hero-section">
        <div class="container mx-auto">
            <!-- Optional Logo Placeholder -->
            <div class="mb-6">
                <span class="text-6xl" role="img" aria-label="ancient scroll and cross">📜✝️</span>
            </div>
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4 leading-tight">
                בית מדרש וירטואלי למקורות יהודו-נוצריים חיצוניים
            </h1>
            <p class="text-xl md:text-2xl lg:text-3xl font-light opacity-90">
                מאגר כתבי יד, תרגומים וביאורים לחקר המורשת המשותפת
            </p>
        </div>
    </header>

    <!-- Main Navigation Bar -->
    <nav class="bg-white shadow-md py-4 px-4 md:px-8 rounded-full -mt-8 relative z-10 mx-auto w-11/12 md:w-3/4 lg:w-2/3">
        <div class="container mx-auto flex justify-center">
            <ul class="rtl-nav-items">
                <li><a href="#" class="nav-link text-indigo-700 font-semibold hover:bg-indigo-50">דף הבית</a></li>
                <li><a href="#about" class="nav-link text-gray-700 hover:bg-gray-100">אודות הפרויקט</a></li>
                <li><a href="#texts" class="nav-link text-gray-700 hover:bg-gray-100">מאגר כתבים</a></li>
                <li><a href="#articles" class="nav-link text-gray-700 hover:bg-gray-100">מאמרים ומחקרים</a></li>
                <li><a href="#contact" class="nav-link text-gray-700 hover:bg-gray-100">צרו קשר</a></li>
            </ul>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-12 md:py-16">

        <!-- Short About Section -->
        <section id="about" class="bg-white p-8 md:p-12 rounded-2xl shadow-lg mb-16">
            <h2 class="text-3xl md:text-4xl font-semibold mb-6 text-indigo-700">ברוכים הבאים לבית המדרש הוירטואלי!</h2>
            <p class="text-lg leading-relaxed text-gray-800">
                פרויקט 'מקורות יהודו-נוצריים חיצוניים' הוא יוזמה ייחודית ליצירת מאגר מקוון של כתבים עתיקים מתקופת בית שני ואילך, המצויים בממשק שבין היהדות לנצרות הקדומה.
                מטרתנו היא להנגיש כתבי יד אלה – רבים מהם אינם מוכרים לקהל הרחב – באמצעות תרגומים מדויקים, ביאורים מעמיקים, ומאמרי רקע, ולאפשר חקר ולימוד פורה במרחב מרתק זה של היסטוריה, תיאולוגיה, ותרבות.
                אנו מאמינים כי חשיפת מקורות אלה תאיר זוויות חדשות על התפתחות שתי הדתות ותעמיק את ההבנה ההדדית.
            </p>
        </section>

        <!-- Feature Sections (Call-to-Action Cards) -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
            <!-- Card 1: Texts Repository -->
            <div id="texts" class="bg-white p-8 rounded-2xl shadow-lg flex flex-col items-center text-center hover:shadow-xl transition-shadow duration-300">
                <span class="card-icon mb-4" role="img" aria-label="open book">📖</span>
                <h3 class="text-2xl font-bold mb-3 text-gray-900">עיון בכתבים</h3>
                <p class="text-gray-700 mb-6">
                    צללו לעומקם של כתבי היד העתיקים, קראו את הטקסטים המקוריים, את תרגומיהם המילוליים והביאורים המקיפים.
                </p>
                <a href="#" class="inline-block bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-md">
                    למאגר הכתבים
                </a>
            </div>

            <!-- Card 2: Articles and Research -->
            <div id="articles" class="bg-white p-8 rounded-2xl shadow-lg flex flex-col items-center text-center hover:shadow-xl transition-shadow duration-300">
                <span class="card-icon mb-4" role="img" aria-label="magnifying glass">🔍</span>
                <h3 class="text-2xl font-bold mb-3 text-gray-900">הרחבת ידע</h3>
                <p class="text-gray-700 mb-6">
                    גלו מאמרים, ניתוחים מעמיקים ומחקרי רקע שיעשירו את הבנתכם על התקופה, הסוגות הספרותיות והתמות התיאולוגיות של הכתבים.
                </p>
                <a href="#" class="inline-block bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-md">
                    למאמרים ומחקרים
                </a>
            </div>

            <!-- Card 3: The Vision of Daniel the Syrian (Featured) -->
            <div class="bg-white p-8 rounded-2xl shadow-lg flex flex-col items-center text-center hover:shadow-xl transition-shadow duration-300">
                <span class="card-icon mb-4" role="img" aria-label="eye">👁️‍🗨️</span>
                <h3 class="text-2xl font-bold mb-3 text-gray-900">הכירו: חזון דניאל הסורי</h3>
                <p class="text-gray-700 mb-6">
                    התחילו את המסע עם אחד מהטקסטים המרתקים במאגר – "חזון דניאל הסורי", הכולל חזיונות היסטוריים ואפוקליפטיים.
                </p>
                <a href="Source/apoc-dani/syriac_daniel_index.html" class="inline-block bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-md">
                    ל"חזון דניאל הסורי"
                </a>
            </div>
        </section>

        <!-- LLM Feature 1: Ask the Expert -->
        <section class="bg-white p-8 md:p-12 rounded-2xl shadow-lg mb-16">
            <h2 class="text-3xl md:text-4xl font-semibold mb-6 text-purple-700">💡 שאל את המומחה שלנו (בינה מלאכותית)</h2>
            <p class="text-lg leading-relaxed text-gray-700 mb-6">
                יש לך שאלה כללית על כתבים יהודו-נוצריים חיצוניים, דמויות מרכזיות, או הקשרים היסטוריים-תיאולוגיים?
                שאל כאן ותקבל תשובה ממוקדת מאת מודל שפה מתקדם.
            </p>
            <textarea
                id="askExpertInput"
                class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-800 text-base"
                rows="6"
                placeholder="הקלד/י את שאלתך כאן..."
            ></textarea>
            <button
                id="askExpertButton"
                class="mt-6 w-full md:w-auto bg-purple-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-purple-700 transition-colors duration-300 shadow-md text-lg"
            >
                שאל את המומחה
            </button>

            <div id="askExpertOutput" class="llm-response-box mt-6 hidden">
                <h3 class="text-xl font-bold mb-2">תשובה:</h3>
                <p id="askExpertText" class="text-lg text-indigo-900"></p>
                <p id="askExpertLoading" class="loading-text hidden">טוען תשובה...</p>
            </div>
            <div id="askExpertError" class="llm-error-box mt-4 hidden">
                <p>אירעה שגיאה. אנא נסה/י שוב מאוחר יותר.</p>
            </div>
        </section>

        <!-- LLM Feature 2: Concept/Key Term Search -->
        <section class="bg-white p-8 md:p-12 rounded-2xl shadow-lg mb-16">
            <h2 class="text-3xl md:text-4xl font-semibold mb-6 text-teal-700">📚 חיפוש קונספטים / מונחים מרכזיים</h2>
            <p class="text-lg leading-relaxed text-gray-700 mb-6">
                רוצה ללמוד על מונח, דמות או קונספט מרכזי? הקלד/י אותו וקבל/י הסבר מקיף שיסייע לך להבין את הרקע וההקשר שלו בתחום הפרויקט.
            </p>
            <input
                type="text"
                id="conceptSearchInput"
                class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 text-gray-800 text-base"
                placeholder="הקלד/י מונח או קונספט, לדוגמה: 'אסכטולוגיה', 'הממלכה הרביעית', 'פסידו-אפיגרפיה'..."
            />
            <button
                id="conceptSearchButton"
                class="mt-6 w-full md:w-auto bg-teal-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-teal-700 transition-colors duration-300 shadow-md text-lg"
            >
                חפש/י קונספט
            </button>

            <div id="conceptSearchOutput" class="llm-response-box mt-6 hidden">
                <h3 class="text-xl font-bold mb-2">הסבר לקונספט:</h3>
                <p id="conceptSearchText" class="text-lg text-indigo-900"></p>
                <p id="conceptSearchLoading" class="loading-text hidden">טוען הסבר...</p>
            </div>
            <div id="conceptSearchError" class="llm-error-box mt-4 hidden">
                <p>אירעה שגיאה. אנא נסה/י שוב מאוחר יותר.</p>
            </div>
        </section>

        <!-- Updates/News Section (Optional) -->
        <section class="bg-white p-8 md:p-12 rounded-2xl shadow-lg mb-16">
            <h2 class="text-3xl md:text-4xl font-semibold mb-6 text-indigo-700">מה חדש במאגר?</h2>
            <ul class="list-disc list-inside text-lg text-gray-800 space-y-3">
                <li><span class="font-medium">28 ביוני 2025:</span> דף הבית החדש עלה לאוויר! תהנו מהעיצוב והניווט המשופר.</li>
                <li><span class="font-medium">בקרוב:</span> יחידת לימוד מקיפה על "חזון דניאל הסורי" תתווסף למאגר.</li>
                <li><span class="font-medium">מחפשים לשתף פעולה?</span> צרו קשר אם אתם מעוניינים לתרום לפרויקט!</li>
            </ul>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 px-4 md:px-8 text-center rounded-t-3xl shadow-lg">
        <div class="container mx-auto">
            <div class="flex flex-wrap justify-center gap-6 mb-4 text-lg">
                <a href="#about" class="hover:text-indigo-400 transition-colors duration-200">אודות הפרויקט</a>
                <a href="#" class="hover:text-indigo-400 transition-colors duration-200">מדיניות פרטיות</a>
                <a href="#" class="hover:text-indigo-400 transition-colors duration-200">תנאי שימוש</a>
                <a href="#contact" class="hover:text-indigo-400 transition-colors duration-200">צרו קשר</a>
            </div>
            <p class="text-gray-400 text-sm">&copy; 2025 בית מדרש וירטואלי למקורות יהודו-נוצריים חיצוניים. כל הזכויות שמורות.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Ask the Expert Logic ---
            const askExpertInput = document.getElementById('askExpertInput');
            const askExpertButton = document.getElementById('askExpertButton');
            const askExpertOutput = document.getElementById('askExpertOutput');
            const askExpertText = document.getElementById('askExpertText');
            const askExpertLoading = document.getElementById('askExpertLoading');
            const askExpertError = document.getElementById('askExpertError');

            if (askExpertButton) {
                askExpertButton.addEventListener('click', async () => {
                    const question = askExpertInput.value.trim();
                    if (!question) {
                        askExpertError.textContent = 'אנא הכניסו שאלה.';
                        askExpertError.classList.remove('hidden');
                        askExpertOutput.classList.add('hidden');
                        return;
                    }

                    askExpertOutput.classList.add('hidden');
                    askExpertError.classList.add('hidden');
                    askExpertLoading.classList.remove('hidden');
                    askExpertText.textContent = '';

                    try {
                        let chatHistory = [];
                        const prompt = `ענה/י במפורט על השאלה הבאה בהקשר לכתבים יהודו-נוצריים חיצוניים, תקופת בית שני, או תיאולוגיה משיחית: "${question}"`;
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        const payload = { contents: chatHistory };
                        const apiKey = ""; 
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        const result = await response.json();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            askExpertText.textContent = result.candidates[0].content.parts[0].text;
                            askExpertOutput.classList.remove('hidden');
                        } else {
                            askExpertError.textContent = 'לא התקבלה תשובה מהשירות. מבנה התגובה אינו צפוי.';
                            askExpertError.classList.remove('hidden');
                            console.error('Unexpected API response structure for ask expert:', result);
                        }
                    } catch (error) {
                        askExpertError.textContent = `אירעה שגיאה בחיבור לשירות: ${error.message}. אנא ודא/י חיבור אינטרנט תקין ונסה/י שוב.`;
                        askExpertError.classList.remove('hidden');
                        console.error('Error fetching expert answer:', error);
                    } finally {
                        askExpertLoading.classList.add('hidden');
                    }
                });
            } else {
                console.error("Ask Expert elements not found.");
            }

            // --- Concept Search Logic ---
            const conceptSearchInput = document.getElementById('conceptSearchInput');
            const conceptSearchButton = document.getElementById('conceptSearchButton');
            const conceptSearchOutput = document.getElementById('conceptSearchOutput');
            const conceptSearchText = document.getElementById('conceptSearchText');
            const conceptSearchLoading = document.getElementById('conceptSearchLoading');
            const conceptSearchError = document.getElementById('conceptSearchError');

            if (conceptSearchButton) {
                conceptSearchButton.addEventListener('click', async () => {
                    const concept = conceptSearchInput.value.trim();
                    if (!concept) {
                        conceptSearchError.textContent = 'אנא הכניסו מונח או קונספט לחיפוש.';
                        conceptSearchError.classList.remove('hidden');
                        conceptSearchOutput.classList.add('hidden');
                        return;
                    }

                    conceptSearchOutput.classList.add('hidden');
                    conceptSearchError.classList.add('hidden');
                    conceptSearchLoading.classList.remove('hidden');
                    conceptSearchText.textContent = '';

                    try {
                        let chatHistory = [];
                        const prompt = `הסבר/י את המונח/קונספט "${concept}" בהקשר רחב של כתבים יהודו-נוצריים חיצוניים, תקופת בית שני ותיאולוגיה משיחית. התייחס/י בקצרה אם קונספט זה רלוונטי ל"חזון דניאל הסורי". השב/י בעברית.`;
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        const payload = { contents: chatHistory };
                        const apiKey = ""; 
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        const result = await response.json();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            conceptSearchText.textContent = result.candidates[0].content.parts[0].text;
                            conceptSearchOutput.classList.remove('hidden');
                        } else {
                            conceptSearchError.textContent = 'לא התקבל הסבר מהשירות. מבנה התגובה אינו צפוי.';
                            conceptSearchError.classList.remove('hidden');
                            console.error('Unexpected API response structure for concept search:', result);
                        }
                    } catch (error) {
                        conceptSearchError.textContent = `אירעה שגיאה בחיבור לשירות: ${error.message}. אנא ודא/י חיבור אינטרנט תקין ונסה/י שוב.`;
                        conceptSearchError.classList.remove('hidden');
                        console.error('Error fetching concept explanation:', error);
                    } finally {
                        conceptSearchLoading.classList.add('hidden');
                    }
                });
            } else {
                console.error("Concept Search elements not found.");
            }
        });
    </script>
</body>
</html>
