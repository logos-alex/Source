---
layout: base.njk
pagination:
  data: figures
  size: 1
  alias: figureKey
  before: |
    function(figureList) {
      const collection = this.ctx.collections.texts || [];
      // סנן רק דמויות שיש להן תוכן מפורסם (לא draft)
      return figureList.filter(figure => 
        collection.some(item => item.data.figure === figure && !item.data.draft)
      );
    }
permalink: "/by-figure/{{ figureKey }}/index.html"
eleventyComputed:
  title: "כתבים המיוחסים ל{{ figures[figureKey] }}"
---

<div class="text-main category-listing">
  <h1>{{ title }}</h1>
  <div class="book-list">
    {% for item in collections.texts %}
      {# 
        התנאי בודק: הדמות זהה AND זה דף אינדקס AND לא draft
      #}
      {% if item.data.figure == figureKey and item.data.pageNumber == 0 and not item.data.draft %}
        <div class="book-card">
          <h3><a href="{{ item.url | url }}">{{ item.data.title }}</a></h3>
          {% if item.data.description %}
            <p>{{ item.data.description }}</p>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>
