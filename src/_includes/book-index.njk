{% extends "base.njk" %}

{% block content %}
  <div class="text-main">
    {# מציג את הכותרת ואת תוכן המבוא עצמו #}
    <h1>{{ title }}</h1>
    {% if source or figure %}
      {% set sourceHebrew = sources[source] or source %}
      {% set figureHebrew = figures[figure] or figure %}
      <p><em>מקור: {{ sourceHebrew or 'לא מצוין' }} | יחוס: {{ figureHebrew or 'לא מצוין' }}</em></p>
    {% endif %}
    {{ content | safe }}
  </div>

  {# --- תוכן העניינים האוטומטי עבור ספרים ללא תוכן ידני --- #}
  <div class="table-of-contents" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border-color);">
    <h3>העמודים:</h3>
    <ul>
      {% for pageItem in collections.textsByBook[book] %}
        {% if pageItem.data.pageNumber > 0 %}
          <li>
            <a href="{{ pageItem.url | url }}">
              {{ pageItem.data.title }}
            </a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>

{% endblock %}
