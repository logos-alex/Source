<!DOCTYPE html>
<html lang="he" dir="rtl" id="htmlRoot">
<head>
    {% set sitePrefix = (site.pathPrefix or '/Source/') %}
    {% set siteBase = (site.url or 'https://logos-alex.github.io/Source/') %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} | ××•×¦×¨ ×”×›×ª×‘×™× ×”×’× ×•×–×™×</title>
    
    <!-- Accessibility -->
    <meta name="color-scheme" content="light dark">
    
    <!-- SEO & Meta Tags -->
    <meta name="description" content="{% if description %}{{ description }}{% else %}××¡×¢ ××œ ×”×›×ª×‘×™× ×”×’× ×•×–×™× ×•×”××‘×•×“×™× ×©×œ ×”××¡×•×¨×ª ×”×™×”×•×“×™×ª. ×ª×¨×’×•××™×, ×‘×™××•×¨×™× ×•×¢×™×•×Ÿ ×‘×˜×§×¡×˜×™× ×©× ×“×—×§×• ××œ ×”×©×•×œ×™×™×.{% endif %}">
    <meta name="keywords" content="×›×ª×‘×™× ×’× ×•×–×™×, ××¤×•×§×¨×™×¤×”, ×¡×¤×¨×™× ×—×™×¦×•× ×™×™×, ×™×”×“×•×ª, ×‘×™×ª ×©× ×™, ××™× ×•×ª, ×’× ×•×¡×˜×™×§×”, ×§×‘×œ×”, ××™×¡×˜×™×§×”, ×“× ×™××œ, ××‘×¨×”×, ×–×¨×•×‘×‘×œ, ×¢×–×¨×, ×™×©×¢×™×”×•, ××œ×™×”×•">
    <meta name="author" content="×‘×™×ª ×”××“×¨×© ×”×•×•×™×¨×˜×•××œ×™">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ site.origin }}{{ page.url | prefixUrl }}">
    
    <!-- Open Graph Tags for Social Media -->
    <meta property="og:type" content="{% if pageNumber == 0 %}book{% else %}article{% endif %}">
    <meta property="og:title" content="{{ title }} | ××•×¦×¨ ×”×›×ª×‘×™× ×”×’× ×•×–×™×">
    <meta property="og:description" content="{% if description %}{{ description }}{% else %}××¡×¢ ××œ ×”×›×ª×‘×™× ×”×’× ×•×–×™× ×•×”××‘×•×“×™× ×©×œ ×”××¡×•×¨×ª ×”×™×”×•×“×™×ª. ×ª×¨×’×•××™×, ×‘×™××•×¨×™× ×•×¢×™×•×Ÿ ×‘×˜×§×¡×˜×™× ×©× ×“×—×§×• ××œ ×”×©×•×œ×™×™×.{% endif %}">
    <meta property="og:url" content="{{ site.origin }}{{ page.url | prefixUrl }}">
    <meta property="og:site_name" content="××•×¦×¨ ×”×›×ª×‘×™× ×”×’× ×•×–×™×">
    <meta property="og:locale" content="he_IL">
    
    <!-- Twitter/X Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{{ title }} | ××•×¦×¨ ×”×›×ª×‘×™× ×”×’× ×•×–×™×">
    <meta name="twitter:description" content="{% if description %}{{ description }}{% else %}××¡×¢ ××œ ×”×›×ª×‘×™× ×”×’× ×•×–×™× ×•×”××‘×•×“×™× ×©×œ ×”××¡×•×¨×ª ×”×™×”×•×“×™×ª. ×ª×¨×’×•××™×, ×‘×™××•×¨×™× ×•×¢×™×•×Ÿ ×‘×˜×§×¡×˜×™× ×©× ×“×—×§×• ××œ ×”×©×•×œ×™×™×.{% endif %}">
    <meta name="twitter:url" content="{{ site.origin }}{{ page.url | prefixUrl }}">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "{% if pageNumber == 0 %}Book{% else %}Article{% endif %}",
      "name": "{{ title }}",
      "description": "{% if description %}{{ description }}{% else %}××¡×¢ ××œ ×”×›×ª×‘×™× ×”×’× ×•×–×™× ×•×”××‘×•×“×™× ×©×œ ×”××¡×•×¨×ª ×”×™×”×•×“×™×ª. ×ª×¨×’×•××™×, ×‘×™××•×¨×™× ×•×¢×™×•×Ÿ ×‘×˜×§×¡×˜×™× ×©× ×“×—×§×• ××œ ×”×©×•×œ×™×™×.{% endif %}",
      "url": "{{ site.origin }}{{ page.url | prefixUrl }}",
      "inLanguage": "he",
      "author": {
        "@type": "Organization",
        "name": "××•×¦×¨ ×”×›×ª×‘×™× ×”×’× ×•×–×™×"
      }
    }
    </script>
    
    {# --- ×”×•×¡×¤×ª ×”×’×•×¤×Ÿ ×”××©×•×¤×¨ ×-Google Fonts --- #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@300;400;700&family=Noto+Serif+Hebrew:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ siteBase }}assets/style.css">
</head>
<body class="{{ bodyClass }}">
    <a class="skip-link" href="#main-content">×“×œ×’ ×œ×ª×•×›×Ÿ</a>
    <button id="readingModeToggle" class="reading-mode-toggle" type="button" aria-pressed="false" title="××¦×‘ ×§×¨×™××”">ğŸ“–</button>
    <script>
        (function() {
            const toggleButton = document.getElementById('readingModeToggle');
            const storedReadingMode = localStorage.getItem('readingMode') === 'true';

            if (storedReadingMode) {
                document.body.classList.add('reading-mode');
            }

            if (toggleButton) {
                toggleButton.setAttribute('aria-pressed', String(storedReadingMode));
                toggleButton.addEventListener('click', function() {
                    document.body.classList.toggle('reading-mode');
                    const isReading = document.body.classList.contains('reading-mode');
                    localStorage.setItem('readingMode', isReading);
                    toggleButton.setAttribute('aria-pressed', String(isReading));
                });
            }
        })();
    </script>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "ucq1c77qd5");
    </script>

    {# --- Google Analytics (GA4) --- #}
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M3NHG4MWVR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M3NHG4MWVR');
    </script>
    <header>
        <div class="header-top">
            <h1><a href="{{ siteBase }}">××•×¦×¨ ×”×›×ª×‘×™× ×”×’× ×•×–×™×</a></h1>
            <button id="themeToggle" class="theme-toggle" aria-label="×‘×—×¨ ××¦×‘ ××•×¨/×—×•×©×š" aria-pressed="false" title="××¦×‘ ××•×¨/×—×•×©×š">ğŸŒ™</button>
        </div>
        <nav role="navigation" aria-label="× ×™×•×•×˜ ×¨××©×™">
            <a href="{{ siteBase }}" {% if page.url == "/" %}aria-current="page"{% endif %}>×“×£ ×”×‘×™×ª</a>
            <a href="{{ siteBase }}search/" {% if page.url == "/search/" %}aria-current="page"{% endif %}>ğŸ” ×—×™×¤×•×©</a>

            <div class="nav-dropdown">
                <a href="{{ siteBase }}texts/" class="dropbtn" {% if page.url and page.url.startsWith("/texts/") %}aria-current="page"{% endif %}>×œ×¤×™ ××§×•×¨</a>
                <div class="dropdown-content">
                    <a href="{{ siteBase }}texts/hebrew/" {% if page.url == "/texts/hebrew/" %}aria-current="page"{% endif %}>×¢×‘×¨×™×ª</a>
                    <a href="{{ siteBase }}texts/slavic/" {% if page.url == "/texts/slavic/" %}aria-current="page"{% endif %}>×¡×œ××‘×™×ª</a>
                    <a href="{{ siteBase }}texts/aramaic/" {% if page.url == "/texts/aramaic/" %}aria-current="page"{% endif %}>××¨××™×ª</a>
                </div>
            </div>
            
            <div class="nav-dropdown">
                <a href="{{ siteBase }}by-figure/" class="dropbtn" {% if page.url and page.url.startsWith("/by-figure/") %}aria-current="page"{% endif %}>×œ×¤×™ ×™×—×•×¡</a>
                <div class="dropdown-content">
                    <a href="{{ siteBase }}by-figure/abraham/" {% if page.url == "/by-figure/abraham/" %}aria-current="page"{% endif %}>××‘×¨×”×</a>
                    <a href="{{ siteBase }}by-figure/daniel/" {% if page.url == "/by-figure/daniel/" %}aria-current="page"{% endif %}>×“× ×™××œ</a>
                    <a href="{{ siteBase }}by-figure/zerubbabel/" {% if page.url == "/by-figure/zerubbabel/" %}aria-current="page"{% endif %}>×–×¨×•×‘×‘×œ</a>
                </div>
            </div>
        </nav>
        {% include "breadcrumbs.njk" %}
    </header>
    
    <main id="main-content" role="main">
        {% block content %}
            {{ content | safe }}
        {% endblock %}
    </main>
    <footer>
        <div id="google_translate_element"></div>
        <p>&copy; ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª - 2025</p>
        <p style="font-size: 0.7em; color: #999;">
            <a href="{{ siteBase }}sitemap.xml" style="color: inherit; text-decoration: none;">Sitemap</a> | 
            <a href="{{ siteBase }}robots.txt" style="color: inherit; text-decoration: none;">Robots</a>
        </p>
    </footer>

    <!-- Dark Mode Script -->
    <script>
      (function() {
        const htmlRoot = document.getElementById('htmlRoot');
        const themeToggle = document.getElementById('themeToggle');
        
        // Check stored preference or system preference
        function initTheme() {
          const stored = localStorage.getItem('theme');
          const prefer = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          const theme = stored || prefer;
          applyTheme(theme);
        }
        
        function applyTheme(theme) {
          const isDark = theme === 'dark';
          if (isDark) {
            htmlRoot.setAttribute('data-theme', 'dark');
            if (themeToggle) themeToggle.textContent = 'â˜€ï¸';
          } else {
            htmlRoot.removeAttribute('data-theme');
            if (themeToggle) themeToggle.textContent = 'ğŸŒ™';
          }
          if (themeToggle) {
            themeToggle.setAttribute('aria-pressed', String(isDark));
          }
          localStorage.setItem('theme', theme);
        }
        
        if (themeToggle) {
          themeToggle.addEventListener('click', function() {
            const current = htmlRoot.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
          });
        }
        
        initTheme();
      })();
    </script>

    <!-- Google Translate -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'he',
                includedLanguages: 'en,fr,de,es,ru,ar,it',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>
