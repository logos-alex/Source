<!DOCTYPE html>
<html lang="he" dir="rtl" id="htmlRoot">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} | ×‘×™×ª ××“×¨×© ×œ×›×ª×‘×™× ×’× ×•×–×™×</title>
    
    <!-- Accessibility -->
    <meta name="color-scheme" content="light dark">
    
    <!-- SEO & Meta Tags -->
    <meta name="description" content="{% if description %}{{ description }}{% else %}×‘×™×ª ××“×¨×© ×•×™×¨×˜×•××œ×™ - ×ª×¨×’×•××™× ×•×¤×¨×©× ×•×ª ×©×œ ×›×ª×‘×™× ×’× ×•×–×™× ×™×”×•×“×™×™× ×¢×ª×™×§×™× ××ª×§×•×¤×ª ×‘×™×ª ×©× ×™{% endif %}">
    <meta name="keywords" content="×›×ª×‘×™× ×’× ×•×–×™×, ××¤×•×§×œ×™×¤×¡×”, ×™×”×•×“×™×§×”, ×‘×™×ª ×©× ×™, ××œ×™×”×•, ×™×¢×§×‘, ×¢×–×¨×, ×™×©×¢×™×”×•">
    <meta name="author" content="×‘×™×ª ×”××“×¨×© ×”×•×•×™×¨×˜×•××œ×™">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://heb-sources.netlify.app{{ page.url }}">
    
    <!-- Open Graph Tags for Social Media -->
    <meta property="og:type" content="{% if pageNumber == 0 %}book{% else %}article{% endif %}">
    <meta property="og:title" content="{{ title }}">
    <meta property="og:description" content="{% if description %}{{ description }}{% else %}×›×ª×‘×™× ×’× ×•×–×™× ×™×”×•×“×™×™× ×¢×ª×™×§×™×{% endif %}">
    <meta property="og:url" content="https://heb-sources.netlify.app{{ page.url }}">
    <meta property="og:site_name" content="×‘×™×ª ××“×¨×© ×•×™×¨×˜×•××œ×™ ×œ×›×ª×‘×™× ×’× ×•×–×™×">
    <meta property="og:locale" content="he_IL">
    
    <!-- Twitter/X Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{{ title }}">
    <meta name="twitter:description" content="{% if description %}{{ description }}{% else %}×›×ª×‘×™× ×’× ×•×–×™× ×™×”×•×“×™×™× ×¢×ª×™×§×™×{% endif %}">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "{% if pageNumber == 0 %}Book{% else %}Article{% endif %}",
      "name": "{{ title }}",
      "description": "{% if description %}{{ description }}{% else %}×›×ª×‘×™× ×’× ×•×–×™× ×™×”×•×“×™×™× ×¢×ª×™×§×™×{% endif %}",
      "url": "https://heb-sources.netlify.app{{ page.url }}",
      "inLanguage": "he",
      "author": {
        "@type": "Organization",
        "name": "×‘×™×ª ×”××“×¨×© ×”×•×•×™×¨×˜×•××œ×™"
      }
    }
    </script>
    
    <link rel="stylesheet" href="{{ '/assets/style.css' | url }}">
    <link rel="stylesheet" href="{{ '/pagefind/pagefind-ui.css' | url }}">
    
    {# --- ×”×•×¡×¤×ª ×”×’×•×¤×Ÿ ×”××©×•×¤×¨ ×-Google Fonts --- #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Hebrew:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="header-top">
            <h1><a href="/">×‘×™×ª ××“×¨×© ×•×™×¨×˜×•××œ×™ ×œ×›×ª×‘×™× ×’× ×•×–×™×</a></h1>
            <button id="themeToggle" class="theme-toggle" aria-label="×‘×—×¨ ××¦×‘ ××•×¨/×—×•×©×š" title="××¦×‘ ××•×¨/×—×•×©×š">ğŸŒ™</button>
        </div>
        <nav role="navigation" aria-label="× ×™×•×•×˜ ×¨××©×™">
            <a href="/">×“×£ ×”×‘×™×ª</a>
            <a href="/texts/">×œ×¤×™ ××§×•×¨</a>
            <a href="/by-figure/">×œ×¤×™ ×™×—×•×¡</a>
        </nav>
        <div id="search"></div>
        {% include "breadcrumbs.njk" %}
    </header>
    
    <main role="main">
        {% block content %}
            {{ content | safe }}
        {% endblock %}
    </main>
    <footer>
        <p>&copy; ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª - 2025</p>
        <p style="font-size: 0.7em; color: #999;">
            <a href="/sitemap.xml" style="color: inherit; text-decoration: none;">Sitemap</a> | 
            <a href="/robots.txt" style="color: inherit; text-decoration: none;">Robots</a>
        </p>
    </footer>

    <!-- Dark Mode Script -->
    <script>
      (function() {
        const htmlRoot = document.getElementById('htmlRoot');
        const themeToggle = document.getElementById('themeToggle');
        
        // Check stored preference or system preference
        function initTheme() {
          const stored = localStorage.getItem('theme');
          const prefer = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          const theme = stored || prefer;
          applyTheme(theme);
        }
        
        function applyTheme(theme) {
          if (theme === 'dark') {
            htmlRoot.setAttribute('data-theme', 'dark');
            if (themeToggle) themeToggle.textContent = 'â˜€ï¸';
          } else {
            htmlRoot.removeAttribute('data-theme');
            if (themeToggle) themeToggle.textContent = 'ğŸŒ™';
          }
          localStorage.setItem('theme', theme);
        }
        
        if (themeToggle) {
          themeToggle.addEventListener('click', function() {
            const current = htmlRoot.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
          });
        }
        
        initTheme();
      })();
    </script>

    <!-- Google Translate Widget - START -->
    <div id="google_translate_element" style="position: fixed; bottom: 20px; right: 20px; z-index: 999;"></div>
    <script type="text/javascript">
      function googleTranslateElementInit( ) {
        new google.translate.TranslateElement({
          pageLanguage: 'he',
          includedLanguages: 'en,ru,es,fr,de,ar', // ×©×¤×•×ª ×œ×‘×—×™×¨×”: ×× ×’×œ×™×ª, ×¨×•×¡×™×ª, ×¡×¤×¨×“×™×ª, ×¦×¨×¤×ª×™×ª, ×’×¨×× ×™×ª, ×¢×¨×‘×™×ª
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
          autoDisplay: false
        }, 'google_translate_element');
      }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- Pagefind Search -->
    <script src="{{ '/pagefind/pagefind-ui.js' | url }}" onload="new PagefindUI({ element: '#search', showSubResults: true, showEmptyFilters: false });" defer></script>

    <style>
      /* ×¢×™×¦×•×‘ ××•×ª×× ×œ×•×•×™×“×’'×˜ ×”×ª×¨×’×•× */
      body {
        top: 0 !important; /* ××•× ×¢ ×§×¤×™×¦×” ×©×œ ×”×¢××•×“ ×›×©×”×•×•×™×“×’'×˜ × ×˜×¢×Ÿ */
      }
      .goog-te-gadget-simple {
        background-color: #fff !important;
        border: 1px solid #ccc !important;
        padding: 6px 10px !important;
        border-radius: 6px !important;
        font-size: 14px !important;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      }
      .goog-te-gadget-simple img {
        display: none !important; /* ××¡×ª×™×¨ ××ª ×”××™×™×§×•×Ÿ ×©×œ ×’×•×’×œ */
      }
      .goog-te-banner-frame.skiptranslate {
        display: none !important; /* ××¡×ª×™×¨ ××ª ×”×‘×× ×¨ ×©×œ ×’×•×’×œ ×©××•×¤×™×¢ ×‘×¨××© ×”×¢××•×“ ×œ××—×¨ ×ª×¨×’×•× */
      }
    </style>
    <!-- Google Translate Widget - END -->

</body>
</html>
